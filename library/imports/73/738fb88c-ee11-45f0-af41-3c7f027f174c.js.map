{"version":3,"sources":["../../../../../assets/common/script/assets/common/script/uiGamePanel.js"],"names":["mvs","require","GLB","Appear_Role","None","Brother","Teacher","Besom","Door","cc","Class","extends","properties","hitAudio","default","url","AudioClip","laughAudio","closeDoorSmall","closeDoorAll","standUpAuido","besomNode","Node","brotherNode","teacherNode","shutDoorSprite","SpriteFrame","halfDoorSprite","hitButtonNode","complacentButtonNode","addRedPrefab","Prefab","reduceRedPrefab","addBluePrefab","reduceBluePrefab","redNumParent","blueNumParent","redScoreNode","blueScoreNode","timeNode","selfNode","otherNode","selfIcon","rivalIcon","onLoad","_super","curAppearRole","totalInterval","curInterval","besomAnim","getComponent","Animation","besomAnimName","brotherAnim","brotherAudio","AudioSource","brotherAnimName","teacherAnim","teacherAudio","halfDoorAnimName","openDoorAnimName","closeDoorAnimName","on","roleAlreadyAppear","redScoreLabel","Label","blueScoreLabel","timeLabel","clientEvent","eventType","appearBesom","appearBrother","appearTeacher","halfOpenDoor","standUpEvent","sitDown","showAddRedNum","showReduceRedNum","showBlueAddNum","showReduceBlueNum","hitEvent","hit","complacentEvent","complacent","gameOver","roundStart","leaveRoomNotify","leaveRoom","leaveRoomMedNotify","isPersonAppear","isNeedTiming","isPlayerStandUp","totalStandUpTime","curStandUpTime","addredNumPool","reduceRedNumPool","addBlueNumPool","reduceBlueNumPool","createPool","selfScore","otherScore","updateSelfScore","updateOtherScore","totalTime","curTime","timer","console","log","nodeDict","setData","id","playerUserIds","self","other","exit","data","Game","GameManager","gameState","GameState","Over","uiFunc","openUI","obj","uiTip","bind","play","setTimeout","countDownEvent","clearInterval","countDown","setInterval","Play","string","toString","isRoomOwner","msg","action","GAME_OVER_EVENT","sendEventEx","num","NodePool","i","addRedItem","instantiate","reduceRedItem","addBlueItem","reduceBlueItem","put","getPoolItem","pool","prefab","item","size","get","score","parent","init","event","detail","name","wrapMode","param","dispatch","standUpEventMed","playerState","Player_State","StandUp","active","sitDownEvent","SIT_DOWN","STAND_UP","PLAYER_HIT","audioEngine","COMPLACENT","laughId","state","getState","AudioState","PLAYING","randomAppearRole","Math","random","role","randomNumBoth","Min","Max","Range","Rand","round","appearRole","APPEAR_BESOM","APPEAR_BROTHER","APPEAR_TEACHER","HALF_OPEN_DOOR","anim","WrapMode","Normal","Reverse","update","dt","onDestroy","off"],"mappings":"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","file":"uiGamePanel.js","sourceRoot":"../../../../../assets/common/script","sourcesContent":["var mvs = require(\"Matchvs\");\nvar GLB = require(\"Glb\");\nvar Appear_Role = {\n    None: 0,\n    Brother: 1,\n    Teacher: 2,\n    Besom: 3,\n    Door: 4\n};\ncc.Class({\n    extends: require(\"uiPanel\"),\n\n    properties: {\n        hitAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n        laughAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n        closeDoorSmall: {\n            default: null,\n            url: cc.AudioClip\n        },\n        closeDoorAll: {\n            default: null,\n            url: cc.AudioClip\n        },\n        standUpAuido: {\n            default: null,\n            url: cc.AudioClip\n        },\n        besomNode: cc.Node,\n        brotherNode: cc.Node,\n        teacherNode: cc.Node,\n        shutDoorSprite: cc.SpriteFrame,\n        halfDoorSprite: cc.SpriteFrame,\n        hitButtonNode: cc.Node,\n        complacentButtonNode: cc.Node,\n        addRedPrefab: cc.Prefab,\n        reduceRedPrefab: cc.Prefab,\n        addBluePrefab: cc.Prefab,\n        reduceBluePrefab: cc.Prefab,\n        redNumParent: cc.Node,\n        blueNumParent: cc.Node,\n        redScoreNode: cc.Node,\n        blueScoreNode: cc.Node,\n        timeNode: cc.Node,\n        selfNode: cc.Node,\n        otherNode: cc.Node,\n        selfIcon: cc.Node,\n        rivalIcon: cc.Node\n    },\n\n    onLoad() {\n        this._super();\n        this.curAppearRole = Appear_Role.None;\n        this.totalInterval = 6;\n        this.curInterval = 0;\n        this.besomAnim = this.besomNode.getComponent(cc.Animation);\n        this.besomAnimName = 'broom';\n        this.brotherAnim = this.brotherNode.getComponent(cc.Animation);\n        this.brotherAudio = this.brotherNode.getComponent(cc.AudioSource);\n        this.brotherAnimName = 'teacherBro';\n        this.teacherAnim = this.teacherNode.getComponent(cc.Animation);\n        this.teacherAudio = this.teacherNode.getComponent(cc.AudioSource);\n\n        this.halfDoorAnimName = 'noOpen';\n        this.openDoorAnimName = 'openDoo';\n        this.closeDoorAnimName = 'close';\n\n        this.brotherAnim.on('finished', this.roleAlreadyAppear, this);\n        this.teacherAnim.on('finished', this.roleAlreadyAppear, this);\n        this.besomAnim.on('finished', this.roleAlreadyAppear, this);\n        this.redScoreLabel = this.redScoreNode.getComponent(cc.Label);\n        this.blueScoreLabel = this.blueScoreNode.getComponent(cc.Label);\n        this.timeLabel = this.timeNode.getComponent(cc.Label);\n        clientEvent.on(clientEvent.eventType.appearBesom, this.appearBesom, this);\n        clientEvent.on(clientEvent.eventType.appearBrother, this.appearBrother, this);\n        clientEvent.on(clientEvent.eventType.appearTeacher, this.appearTeacher, this);\n        clientEvent.on(clientEvent.eventType.halfOpenDoor, this.halfOpenDoor, this);\n        clientEvent.on(clientEvent.eventType.standUpEvent, this.standUpEvent, this);\n        clientEvent.on(clientEvent.eventType.sitDown, this.sitDown, this);\n        clientEvent.on(clientEvent.eventType.showAddRedNum, this.showAddRedNum, this);\n        clientEvent.on(clientEvent.eventType.showReduceRedNum, this.showReduceRedNum, this);\n        clientEvent.on(clientEvent.eventType.showBlueAddNum, this.showBlueAddNum, this);\n        clientEvent.on(clientEvent.eventType.showReduceBlueNum, this.showReduceBlueNum, this);\n        clientEvent.on(clientEvent.eventType.hitEvent, this.hit, this);\n        clientEvent.on(clientEvent.eventType.complacentEvent, this.complacent, this);\n        clientEvent.on(clientEvent.eventType.gameOver, this.gameOver, this);\n        clientEvent.on(clientEvent.eventType.roundStart, this.roundStart, this);\n        clientEvent.on(clientEvent.eventType.leaveRoomNotify, this.leaveRoom, this);\n        clientEvent.on(clientEvent.eventType.leaveRoomMedNotify, this.leaveRoom, this);\n\n        this.isPersonAppear = false;\n        this.isNeedTiming = true;\n        this.isPlayerStandUp = false;\n        this.totalStandUpTime = 3;\n        this.curStandUpTime = 0;\n        this.addredNumPool = null;\n        this.reduceRedNumPool = null;\n        this.addBlueNumPool = null;\n        this.reduceBlueNumPool = null;\n        this.createPool();\n        this.selfScore = 0;\n        this.otherScore = 0;\n        this.updateSelfScore(0);\n        this.updateOtherScore(0);\n        this.totalTime = 60;\n        this.curTime = 60;\n        this.timer = null;\n\n        console.log(\"----------------\");\n        console.log(this.nodeDict);\n        console.log(this.selfIcon);\n        this.selfIcon.getComponent('playerIcon').setData({id: GLB.playerUserIds[0]});\n        this.rivalIcon.getComponent('playerIcon').setData({id: GLB.playerUserIds[1]});\n        this.self = this.selfNode.getComponent('player');\n        this.other = this.otherNode.getComponent('player');\n\n        this.nodeDict[\"exit\"].on(\"click\", this.exit, this);\n    },\n\n    leaveRoom(data) {\n        if (Game.GameManager.gameState !== GameState.Over) {\n            uiFunc.openUI(\"uiTip\", function(obj) {\n                var uiTip = obj.getComponent(\"uiTip\");\n                if (uiTip) {\n                    uiTip.setData(\"对手离开了游戏\");\n                }\n            }.bind(this));\n        }\n    },\n\n    roundStart: function() {\n        // 回合画面表现--\n        this.nodeDict['readyGo'].getComponent(cc.Animation).play();\n        this.nodeDict['readyGo'].getComponent(cc.AudioSource).play();\n\n        setTimeout(function() {\n            this.countDownEvent();\n        }.bind(this), 2500);\n    },\n\n    gameOver() {\n        this.nodeDict['gameOver'].getComponent(cc.Animation).play();\n        this.nodeDict['gameOver'].getComponent(cc.AudioSource).play();\n        clearInterval(this.timer);\n    },\n\n    exit() {\n        uiFunc.openUI(\"uiExit\");\n    },\n\n    countDownEvent() {\n        this.countDown();\n        this.timer = setInterval(this.countDown.bind(this), 1000);\n    },\n    countDown() {\n        if (Game.GameManager.gameState !== GameState.Play) {\n            clearInterval(this.timer);\n            return;\n        }\n        this.timeLabel.string = this.curTime.toString();\n        if (this.curTime <= 0) {\n            clearInterval(this.timer);\n            if (GLB.isRoomOwner && Game.GameManager.gameState === GameState.Play) {\n                var msg = {action: GLB.GAME_OVER_EVENT};\n                Game.GameManager.sendEventEx(msg);\n            }\n            return;\n        }\n        if (this.curTime === 10) {\n            this.nodeDict[\"countdown\"].getComponent(cc.Animation).play(\"countdown7\");\n        } else if (this.curTime === 3) {\n            this.nodeDict[\"countdown\"].getComponent(cc.Animation).play(\"countdown3\");\n        }\n        this.curTime--;\n    },\n    updateSelfScore(num) {\n        this.selfScore += num;\n        if (this.selfScore < 0) {\n            this.selfScore = 0;\n        }\n        this.blueScoreLabel.string = this.selfScore.toString();\n    },\n    updateOtherScore(num) {\n        this.otherScore += num;\n        if (this.otherScore < 0) {\n            this.otherScore = 0;\n        }\n        this.redScoreLabel.string = this.otherScore.toString();\n    },\n    createPool() {\n        this.addredNumPool = new cc.NodePool();\n        this.reduceRedNumPool = new cc.NodePool();\n        this.addBlueNumPool = new cc.NodePool();\n        this.reduceBlueNumPool = new cc.NodePool();\n        for (var i = 0; i < 10; i++) {\n            var addRedItem = cc.instantiate(this.addRedPrefab);\n            var reduceRedItem = cc.instantiate(this.reduceRedPrefab);\n            var addBlueItem = cc.instantiate(this.addBluePrefab);\n            var reduceBlueItem = cc.instantiate(this.reduceBluePrefab);\n            this.addredNumPool.put(addRedItem);\n            this.reduceRedNumPool.put(reduceRedItem);\n            this.addBlueNumPool.put(addBlueItem);\n            this.reduceBlueNumPool.put(reduceBlueItem);\n        }\n    },\n    getPoolItem(pool, prefab) {\n        var item = null;\n        if (pool.size() > 0) {\n            item = pool.get();\n        } else {\n            item = cc.instantiate(prefab);\n        }\n        return item;\n    },\n    showAddRedNum() {\n        var item = this.getPoolItem(this.addredNumPool, this.addRedPrefab);\n        var score = item.getComponent('updateScore');\n        item.parent = this.redNumParent;\n        score.init(this.addredNumPool);\n        this.updateOtherScore(1);\n    },\n    showReduceRedNum() {\n        var item = this.getPoolItem(this.reduceRedNumPool, this.reduceRedPrefab);\n        var score = item.getComponent('updateScore');\n        item.parent = this.redNumParent;\n        score.init(this.reduceRedNumPool);\n        this.updateOtherScore(-2);\n    },\n    showBlueAddNum() {\n        var item = this.getPoolItem(this.addBlueNumPool, this.addBluePrefab);\n        var score = item.getComponent('updateScore');\n        item.parent = this.blueNumParent;\n        score.init(this.addBlueNumPool);\n        this.updateSelfScore(1);\n    },\n    showReduceBlueNum() {\n        var item = this.getPoolItem(this.reduceBlueNumPool, this.reduceBluePrefab);\n        var score = item.getComponent('updateScore');\n        item.parent = this.blueNumParent;\n        score.init(this.reduceBlueNumPool);\n        this.updateSelfScore(-2);\n    },\n    roleAlreadyAppear(event) {\n        if (event.detail.name === this.openDoorAnimName || event.detail.name === this.brotherAnimName) {\n            if (event.detail.wrapMode === 1) {\n                this.isPersonAppear = true;\n            } else {\n                this.isNeedTiming = true;\n            }\n        }\n        if (event.detail.name === this.halfDoorAnimName || event.detail.name === this.besomAnimName) {\n            this.isNeedTiming = true;\n        }\n\n\n    },\n    standUpEvent(param) {\n        clientEvent.dispatch(clientEvent.eventType.standUpEventMed, param);\n        if (this.self.playerState === Player_State.StandUp) {\n            this.complacentButtonNode.active = false;\n        } else {\n            if (this.other.playerState === Player_State.StandUp) {\n                this.complacentButtonNode.active = true;\n            } else {\n                this.complacentButtonNode.active = false;\n            }\n        }\n        this.hitButtonNode.active = false;\n        this.isPlayerStandUp = true;\n        this.curStandUpTime = 0;\n    },\n    sitDownEvent() {\n        var msg = {\n            action: GLB.SIT_DOWN\n        };\n        Game.GameManager.sendEventEx(msg);\n    },\n    sitDown() {\n        this.isPlayerStandUp = false;\n        this.hitButtonNode.active = true;\n        this.complacentButtonNode.active = false;\n    },\n    hitEvent() {\n        if (Game.GameManager.gameState !== GameState.Play) {\n            return;\n        }\n        if (this.isPersonAppear) {\n            var msg = {\n                action: GLB.STAND_UP\n            };\n        } else {\n            var msg = {\n                action: GLB.PLAYER_HIT\n            };\n        }\n        Game.GameManager.sendEventEx(msg);\n    },\n    hit() {\n        cc.audioEngine.play(this.hitAudio, false, 1);\n    },\n    complacentEvent() {\n        if (Game.GameManager.gameState !== GameState.Play) {\n            return;\n        }\n        var msg = {\n            action: GLB.COMPLACENT\n        };\n        Game.GameManager.sendEventEx(msg);\n    },\n    complacent() {\n        if (this.laughId) {\n            var state = cc.audioEngine.getState(this.laughId);\n            if (state === cc.audioEngine.AudioState.PLAYING) {\n                return;\n            }\n        }\n        this.laughId = cc.audioEngine.play(this.laughAudio, false, 1);\n    },\n\n    randomAppearRole() {\n        var num = Math.random();\n        var role = null;\n        if (num < 0.25) {\n            role = Appear_Role.Besom;\n        } else if (num < 0.5 && num >= 0.25) {\n            role = Appear_Role.Brother;\n        } else if (num < 0.75 && num >= 0.5) {\n            role = Appear_Role.Door;\n        } else {\n            role = Appear_Role.Teacher;\n        }\n        if (role === Appear_Role.Brother || role === Appear_Role.Teacher) {\n            if (role === this.curAppearRole) {\n                this.randomAppearRole();\n                return;\n            }\n        }\n        this.curAppearRole = role;\n        return role;\n    },\n    randomNumBoth(Min, Max) {\n        var Range = Max - Min;\n        var Rand = Math.random();\n        var num = Min + Math.round(Rand * Range); //四舍五入\n        return num;\n    },\n    appearRole() {\n        this.action = null;\n        var role = this.randomAppearRole();\n        if (role === Appear_Role.Besom) {\n            this.action = GLB.APPEAR_BESOM;\n        } else if (role === Appear_Role.Brother) {\n            this.action = GLB.APPEAR_BROTHER;\n        } else if (role === Appear_Role.Teacher) {\n            this.action = GLB.APPEAR_TEACHER;\n        } else if (role === Appear_Role.Door) {\n            this.action = GLB.HALF_OPEN_DOOR;\n        }\n        var msg = {\n            action: this.action\n        };\n        Game.GameManager.sendEventEx(msg);\n    },\n    appearBesom() {\n        this.isNeedTiming = false;\n        this.besomNode.active = true;\n        this.besomAnim.play(this.besomAnimName);\n        setTimeout(function() {\n            this.besomNode.active = false;\n        }.bind(this), 1000);\n    },\n    appearBrother() {\n        this.isNeedTiming = false;\n        var anim = this.brotherAnim.play(this.brotherAnimName);\n        anim.wrapMode = cc.WrapMode.Normal;\n        this.brotherAudio.play();\n        setTimeout(function() {\n            this.isPersonAppear = false;\n            var anim = this.brotherAnim.play(this.brotherAnimName);\n            anim.wrapMode = cc.WrapMode.Reverse;\n        }.bind(this), 2000)\n    },\n    halfOpenDoor() {\n        this.isNeedTiming = false;\n        this.teacherAnim.play(this.halfDoorAnimName);\n        setTimeout(function() {\n            if (Game.GameManager.gameState !== GameState.Over) {\n                cc.audioEngine.play(this.closeDoorSmall, false, 1);\n            }\n        }.bind(this), 1500);\n    },\n    appearTeacher() {\n        this.isNeedTiming = false;\n        this.teacherAnim.play(this.openDoorAnimName);\n        setTimeout(function() {\n            if (Game.GameManager.gameState !== GameState.Over) {\n                this.isPersonAppear = false;\n                this.teacherAnim.play(this.closeDoorAnimName);\n                cc.audioEngine.play(this.closeDoorAll, false, 1);\n            }\n        }.bind(this), 4000);\n        setTimeout(function() {\n            this.teacherAudio.play();\n        }.bind(this), 2000);\n    },\n    update(dt) {\n        if (GLB.isRoomOwner && Game.GameManager.gameState === GameState.Play) {\n            if (this.isPlayerStandUp) {\n                if (this.curStandUpTime >= this.totalStandUpTime) {\n                    // this.isPlayerStandUp = false;\n                    this.sitDownEvent();\n                } else {\n                    this.curStandUpTime += dt;\n                }\n            } else {\n                // if (!this.isNeedTiming) return;\n                if (this.curInterval >= this.totalInterval) {\n                    this.curInterval = 0;\n                    this.totalInterval = this.randomNumBoth(4, 6);\n                    this.appearRole();\n                    if (this.action === GLB.APPEAR_TEACHER) {\n                        this.totalInterval += 3;\n                    }\n                } else {\n                    this.curInterval += dt;\n                }\n            }\n\n        }\n    },\n\n    onDestroy() {\n        clearInterval(this.timer);\n        this.brotherAnim.off('finished', this.roleAlreadyAppear, this);\n        this.teacherAnim.off('finished', this.roleAlreadyAppear, this);\n        this.besomAnim.off('finished', this.roleAlreadyAppear, this);\n        clientEvent.off(clientEvent.eventType.appearBesom, this.appearBesom, this);\n        clientEvent.off(clientEvent.eventType.appearBrother, this.appearBrother, this);\n        clientEvent.off(clientEvent.eventType.appearTeacher, this.appearTeacher, this);\n        clientEvent.off(clientEvent.eventType.halfOpenDoor, this.halfOpenDoor, this);\n        clientEvent.off(clientEvent.eventType.standUpEvent, this.standUpEvent, this);\n        clientEvent.off(clientEvent.eventType.sitDown, this.sitDown, this);\n        clientEvent.off(clientEvent.eventType.showAddRedNum, this.showAddRedNum, this);\n        clientEvent.off(clientEvent.eventType.showReduceRedNum, this.showReduceRedNum, this);\n        clientEvent.off(clientEvent.eventType.showBlueAddNum, this.showBlueAddNum, this);\n        clientEvent.off(clientEvent.eventType.showReduceBlueNum, this.showReduceBlueNum, this);\n        clientEvent.off(clientEvent.eventType.hitEvent, this.hit, this);\n        clientEvent.off(clientEvent.eventType.complacentEvent, this.complacent, this);\n        clientEvent.off(clientEvent.eventType.gameOver, this.gameOver, this);\n        clientEvent.off(clientEvent.eventType.roundStart, this.roundStart, this);\n        clientEvent.off(clientEvent.eventType.leaveRoomNotify, this.leaveRoom, this);\n        clientEvent.off(clientEvent.eventType.leaveRoomMedNotify, this.leaveRoom, this);\n\n    }\n\n});\n"]}